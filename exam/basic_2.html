<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Frontend Basic #2</title>
    <style>
        table {
            margin: auto;
            border-collapse: collapse;
            margin-top: 20px;
        }

        tr,
        th,
        td {
            padding-left: 3px;
            padding-right: 3px;
            border: 1px solid;
        }
    </style>
</head>

<body>
    <table id="userTable">
        <thead>
            <tr>
                <th>번호</th>
                <th>이름</th>
                <th>근무시간</th>
                <th>시간당급여액</th>
                <th>기본액</th>
                <th>초과수당</th>
                <th>합계</th>
                <th>세액</th>
                <th>실지불액</th>
            </tr>
        </thead>
        <tbody>
            <tr></tr>
        </tbody>
    </table>
    <table>
        <tr>
            <th>총지불액</th>
            <td id="total" style="text-align: left"></td>
        </tr>
    </table>

    <script>
        const userInfo = {
            base_time: 20,
            list: [
                { id: 1, username: "홍길동", work_time: 40, per_pay: 10000 },
                { id: 2, username: "송민헌", work_time: 20, per_pay: 20000 },
                { id: 3, username: "장길산", work_time: 30, per_pay: 30000 },
                { id: 4, username: "임꺽정", work_time: 10, per_pay: 40000 },
                { id: 5, username: "강민구", work_time: 30, per_pay: 10000 },
            ],
        };
        const users = userInfo.list;
        const base = userInfo.base_time;
        const COL_IDX = { id: 0, username: 1, work_time: 2, per_pay: 3 };
        let tot = 0;

        function insertTask(target, value) {
            if (!isNaN(value)) {
                target.innerText = value.toLocaleString();
                target.style.textAlign = "right";
                return;
            } else {
                target.innerText = value;
            }
        }
        users.forEach((user) => {
            const row = userTable.insertRow();
            const cells = Array(5);

            for (const [k, v] of Object.entries(user)) {
                cells[COL_IDX[k]] = v;
            }
            if (cells[2] >= base) {
                cells[4] = cells[2] * cells[3];
                cells[5] = (cells[2] - base) * cells[3] * 0.5;
            } else {
                cells[4] = cells[2] * cells[3];
                cells[5] = 0;
            }
            cells[6] = cells[4] + cells[5];
            cells[7] = cells[6] * 0.033;
            cells[8] = cells[6] - cells[7];
            tot += cells[8];

            cells.forEach((val) => {
                const cell = row.insertCell();
                insertTask(cell, val);
            });
        });
        document.getElementById("total").innerText = tot.toLocaleString();
    </script>
</body>

</html>